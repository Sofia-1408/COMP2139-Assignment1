2025-12-03 00:29:50.839 -05:00 [INF] User profile is available. Using 'C:\Users\janik\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-03 00:29:51.593 -05:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:29:51.656 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:29:51.661 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:29:51.675 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-12-03 00:29:51.832 -05:00 [INF] Now listening on: http://localhost:5064
2025-12-03 00:29:51.834 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-03 00:29:51.835 -05:00 [INF] Hosting environment: Development
2025-12-03 00:29:51.836 -05:00 [INF] Content root path: C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1
2025-12-03 00:29:52.252 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/ - null null
2025-12-03 00:29:52.263 -05:00 [WRN] Failed to determine the https port for redirect.
2025-12-03 00:29:52.378 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."Id" = @__p_0
LIMIT 1
2025-12-03 00:29:52.418 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ClaimType", a."ClaimValue", a."UserId"
FROM "AspNetUserClaims" AS a
WHERE a."UserId" = @__user_Id_0
2025-12-03 00:29:52.440 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
2025-12-03 00:29:52.451 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1)'
2025-12-03 00:29:52.457 -05:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:29:52.466 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:29:52.471 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.309ms.
2025-12-03 00:29:52.481 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:29:52.501 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:29:52.554 -05:00 [INF] Executed ViewResult - view Index executed in 72.4846ms.
2025-12-03 00:29:52.557 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1) in 96.6028ms
2025-12-03 00:29:52.560 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:29:52.560 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1)'
2025-12-03 00:29:52.576 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/ - 200 null text/html; charset=utf-8 324.7985ms
2025-12-03 00:29:52.614 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:29:52.617 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:29:52.620 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:29:52.621 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.1606ms.
2025-12-03 00:29:52.624 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:29:52.628 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:29:52.630 -05:00 [INF] Executed ViewResult - view Error404 executed in 6.2799ms.
2025-12-03 00:29:52.632 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 12.1638ms
2025-12-03 00:29:52.633 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:29:52.635 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 74.811ms
2025-12-03 00:29:52.639 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:29:54.059 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:29:54.073 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:29:54.075 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:29:54.078 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:29:54.079 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.1354ms.
2025-12-03 00:29:54.082 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:29:54.085 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:29:54.089 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 7.3898ms.
2025-12-03 00:29:54.090 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 12.8668ms
2025-12-03 00:29:54.092 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:29:54.094 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 35.1365ms
2025-12-03 00:29:54.099 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:29:54.103 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/analytics.js - null null
2025-12-03 00:29:54.106 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:29:54.108 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:29:54.111 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:29:54.113 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0172ms.
2025-12-03 00:29:54.114 -05:00 [INF] Sending file. Request path: '/js/analytics.js'. Physical path: 'C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1\wwwroot\js\analytics.js'
2025-12-03 00:29:54.115 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:29:54.117 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/analytics.js - 200 1851 text/javascript 13.3495ms
2025-12-03 00:29:54.118 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:29:54.123 -05:00 [INF] Executed ViewResult - view Error404 executed in 8.088ms.
2025-12-03 00:29:54.125 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 13.8449ms
2025-12-03 00:29:54.126 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:29:54.128 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 28.999ms
2025-12-03 00:29:54.132 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:29:54.254 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:29:54.254 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:29:54.254 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:29:54.259 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:29:54.261 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:29:54.265 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:29:54.269 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:29:54.269 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:29:54.271 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:29:54.272 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:29:54.274 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:29:54.276 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:29:54.329 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:29:54.334 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 60.093ms
2025-12-03 00:29:54.335 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 57.3692ms.
2025-12-03 00:29:54.336 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:29:54.340 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Purchase>()
    .GroupBy(p => new { 
        Year = p.PurchaseDate.Year, 
        Month = p.PurchaseDate.Month
     })
    .Select(g => new { 
        month = string.Format(
            format: "{0}-{1:00}", 
            arg0: (object)g.Key.Year, 
            arg1: (object)g.Key.Month), 
        revenue = g
            .AsQueryable()
            .Sum(e => e.TotalCost)
     })
    .OrderBy(e0 => e0.month)' could not be translated. Additional information: Translation of method 'string.Format' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth() in C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1\Controllers\EventController.cs:line 243
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-03 00:29:54.342 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:29:54.353 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:29:54.364 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 83.5669ms.
2025-12-03 00:29:54.367 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:29:54.382 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:29:54.382 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 110.3977ms
2025-12-03 00:29:54.382 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 105.913ms
2025-12-03 00:29:54.384 -05:00 [INF] Route matched with {action = "Error500", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error500() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:29:54.386 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:29:54.387 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:29:54.393 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 139.308ms
2025-12-03 00:29:54.390 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:29:54.393 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 139.2873ms
2025-12-03 00:29:54.401 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.1888ms.
2025-12-03 00:29:54.409 -05:00 [INF] Executing ViewResult, running view Error500.
2025-12-03 00:29:54.412 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:29:54.414 -05:00 [INF] Executed ViewResult - view Error500 executed in 6.036ms.
2025-12-03 00:29:54.416 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) in 26.2678ms
2025-12-03 00:29:54.417 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:29:54.418 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 500 null text/html; charset=utf-8 164.539ms
2025-12-03 00:30:15.477 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Purchase - null null
2025-12-03 00:30:15.482 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1)'
2025-12-03 00:30:15.486 -05:00 [INF] Route matched with {action = "Index", controller = "Purchase", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller COMP2139_Assignment1.Controllers.PurchaseController (COMP2139-Assignment1).
2025-12-03 00:30:15.488 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:15.510 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."PurchaseId", p."EventId", p."GuestContactInfo", p."PurchaseDate", p."Quantity", p."TotalCost", e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title"
FROM "Purchases" AS p
INNER JOIN "Events" AS e ON p."EventId" = e."EventId"
2025-12-03 00:30:15.552 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 62.5206ms.
2025-12-03 00:30:15.555 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:30:15.565 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:15.568 -05:00 [INF] Executed ViewResult - view Index executed in 12.8712ms.
2025-12-03 00:30:15.570 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1) in 81.7301ms
2025-12-03 00:30:15.572 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1)'
2025-12-03 00:30:15.574 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Purchase - 200 null text/html; charset=utf-8 97.1593ms
2025-12-03 00:30:15.585 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:30:15.589 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:15.590 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:30:15.593 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:15.594 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0135ms.
2025-12-03 00:30:15.596 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:30:15.598 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:15.600 -05:00 [INF] Executed ViewResult - view Error404 executed in 3.2913ms.
2025-12-03 00:30:15.601 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 9.0177ms
2025-12-03 00:30:15.603 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:15.605 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 19.7029ms
2025-12-03 00:30:15.609 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:30:23.308 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Category - null null
2025-12-03 00:30:23.312 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.CategoryController.Index (COMP2139-Assignment1)'
2025-12-03 00:30:23.319 -05:00 [INF] Route matched with {action = "Index", controller = "Category", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String) on controller COMP2139_Assignment1.Controllers.CategoryController (COMP2139-Assignment1).
2025-12-03 00:30:23.327 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.CategoryController.Index (COMP2139-Assignment1) - Validation state: "Invalid"
2025-12-03 00:30:23.334 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CategoryId", c."Description", c."Name"
FROM "Categories" AS c
2025-12-03 00:30:23.340 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.CategoryController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 11.8119ms.
2025-12-03 00:30:23.343 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:30:23.358 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:23.362 -05:00 [INF] Executed ViewResult - view Index executed in 19.2459ms.
2025-12-03 00:30:23.364 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.CategoryController.Index (COMP2139-Assignment1) in 43.1616ms
2025-12-03 00:30:23.366 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.CategoryController.Index (COMP2139-Assignment1)'
2025-12-03 00:30:23.369 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Category - 200 null text/html; charset=utf-8 60.2886ms
2025-12-03 00:30:23.375 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/categories.js - null null
2025-12-03 00:30:23.375 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:30:23.379 -05:00 [INF] The file /js/categories.js was not modified
2025-12-03 00:30:23.383 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:23.384 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/categories.js - 304 null text/javascript 9.3317ms
2025-12-03 00:30:23.386 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:30:23.393 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:23.395 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0161ms.
2025-12-03 00:30:23.397 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:30:23.399 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:23.401 -05:00 [INF] Executed ViewResult - view Error404 executed in 3.6602ms.
2025-12-03 00:30:23.403 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 10.5869ms
2025-12-03 00:30:23.405 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:23.407 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 32.1805ms
2025-12-03 00:30:23.414 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:30:25.468 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:30:25.472 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:30:25.473 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:30:25.475 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:25.476 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.012ms.
2025-12-03 00:30:25.478 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:30:25.479 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:25.480 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 2.7285ms.
2025-12-03 00:30:25.482 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 6.9756ms
2025-12-03 00:30:25.483 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:30:25.485 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 17.3993ms
2025-12-03 00:30:25.492 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:30:25.494 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/analytics.js - null null
2025-12-03 00:30:25.495 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:25.497 -05:00 [INF] The file /js/analytics.js was not modified
2025-12-03 00:30:25.499 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:30:25.500 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/analytics.js - 304 null text/javascript 5.6638ms
2025-12-03 00:30:25.502 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:25.507 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0123ms.
2025-12-03 00:30:25.508 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:30:25.510 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:25.511 -05:00 [INF] Executed ViewResult - view Error404 executed in 2.9619ms.
2025-12-03 00:30:25.513 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 10.853ms
2025-12-03 00:30:25.515 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:25.516 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 24.367ms
2025-12-03 00:30:25.520 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:30:25.520 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:30:25.521 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:30:25.521 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:30:25.527 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:30:25.529 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:30:25.532 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:30:25.533 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:30:25.534 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:30:25.536 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:30:25.538 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:25.540 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:25.542 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:25.546 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 7.9976ms
2025-12-03 00:30:25.547 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:30:25.548 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:30:25.548 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:30:25.550 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 5.2609ms.
2025-12-03 00:30:25.552 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 5.8533ms.
2025-12-03 00:30:25.553 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Purchase>()
    .GroupBy(p => new { 
        Year = p.PurchaseDate.Year, 
        Month = p.PurchaseDate.Month
     })
    .Select(g => new { 
        month = string.Format(
            format: "{0}-{1:00}", 
            arg0: (object)g.Key.Year, 
            arg1: (object)g.Key.Month), 
        revenue = g
            .AsQueryable()
            .Sum(e => e.TotalCost)
     })
    .OrderBy(e0 => e0.month)' could not be translated. Additional information: Translation of method 'string.Format' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth() in C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1\Controllers\EventController.cs:line 243
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-03 00:30:25.556 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:30:25.558 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:30:25.568 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 28.4535ms
2025-12-03 00:30:25.570 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 27.5966ms
2025-12-03 00:30:25.570 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:30:25.571 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:30:25.573 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:30:25.574 -05:00 [INF] Route matched with {action = "Error500", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error500() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:30:25.576 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 54.3717ms
2025-12-03 00:30:25.578 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 56.1151ms
2025-12-03 00:30:25.580 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:25.592 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0219ms.
2025-12-03 00:30:25.594 -05:00 [INF] Executing ViewResult, running view Error500.
2025-12-03 00:30:25.595 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:25.597 -05:00 [INF] Executed ViewResult - view Error500 executed in 3.4319ms.
2025-12-03 00:30:25.599 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) in 18.8436ms
2025-12-03 00:30:25.600 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:30:25.601 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 500 null text/html; charset=utf-8 80.8368ms
2025-12-03 00:30:31.716 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Purchase - null null
2025-12-03 00:30:31.720 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1)'
2025-12-03 00:30:31.721 -05:00 [INF] Route matched with {action = "Index", controller = "Purchase", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller COMP2139_Assignment1.Controllers.PurchaseController (COMP2139-Assignment1).
2025-12-03 00:30:31.723 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:31.726 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."PurchaseId", p."EventId", p."GuestContactInfo", p."PurchaseDate", p."Quantity", p."TotalCost", e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title"
FROM "Purchases" AS p
INNER JOIN "Events" AS e ON p."EventId" = e."EventId"
2025-12-03 00:30:31.729 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 4.3226ms.
2025-12-03 00:30:31.732 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:30:31.734 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:31.736 -05:00 [INF] Executed ViewResult - view Index executed in 4.9548ms.
2025-12-03 00:30:31.739 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1) in 15.2731ms
2025-12-03 00:30:31.741 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1)'
2025-12-03 00:30:31.743 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Purchase - 200 null text/html; charset=utf-8 27.0876ms
2025-12-03 00:30:31.749 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:30:31.755 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:31.757 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:30:31.760 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:31.762 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0131ms.
2025-12-03 00:30:31.765 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:30:31.767 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:31.769 -05:00 [INF] Executed ViewResult - view Error404 executed in 3.9418ms.
2025-12-03 00:30:31.772 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 11.6078ms
2025-12-03 00:30:31.774 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:31.776 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 26.6179ms
2025-12-03 00:30:31.782 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:30:45.305 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event - null null
2025-12-03 00:30:45.309 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1)'
2025-12-03 00:30:45.313 -05:00 [INF] Route matched with {action = "Index", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32], System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:30:45.315 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1) - Validation state: "Invalid"
2025-12-03 00:30:45.348 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title", c."CategoryId", c."Description", c."Name"
FROM "Events" AS e
INNER JOIN "Categories" AS c ON e."CategoryId" = c."CategoryId"
ORDER BY e."Title"
2025-12-03 00:30:45.352 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 34.8747ms.
2025-12-03 00:30:45.354 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:30:45.378 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CategoryId", c."Description", c."Name"
FROM "Categories" AS c
2025-12-03 00:30:45.406 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:45.410 -05:00 [INF] Executed ViewResult - view Index executed in 55.805ms.
2025-12-03 00:30:45.412 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1) in 97.0249ms
2025-12-03 00:30:45.414 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1)'
2025-12-03 00:30:45.416 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event - 200 null text/html; charset=utf-8 110.9587ms
2025-12-03 00:30:45.422 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/events.js - null null
2025-12-03 00:30:45.423 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:30:45.426 -05:00 [INF] The file /js/events.js was not modified
2025-12-03 00:30:45.431 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:45.432 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/events.js - 304 null text/javascript 9.5715ms
2025-12-03 00:30:45.434 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:30:45.441 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:45.443 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0198ms.
2025-12-03 00:30:45.446 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:30:45.448 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:45.450 -05:00 [INF] Executed ViewResult - view Error404 executed in 4.1017ms.
2025-12-03 00:30:45.453 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 12.0288ms
2025-12-03 00:30:45.455 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:45.457 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 34.6989ms
2025-12-03 00:30:45.464 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:30:49.776 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/Details/1 - null null
2025-12-03 00:30:49.779 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.Details (COMP2139-Assignment1)'
2025-12-03 00:30:49.783 -05:00 [INF] Route matched with {action = "Details", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Details(Int32) on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:30:49.785 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.Details (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:49.794 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title", c."CategoryId", c."Description", c."Name"
FROM "Events" AS e
INNER JOIN "Categories" AS c ON e."CategoryId" = c."CategoryId"
WHERE e."EventId" = @__id_0
LIMIT 1
2025-12-03 00:30:49.797 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.Details (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 10.1044ms.
2025-12-03 00:30:49.800 -05:00 [INF] Executing ViewResult, running view Details.
2025-12-03 00:30:49.806 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:49.809 -05:00 [INF] Executed ViewResult - view Details executed in 10.0428ms.
2025-12-03 00:30:49.812 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.Details (COMP2139-Assignment1) in 26.5391ms
2025-12-03 00:30:49.814 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.Details (COMP2139-Assignment1)'
2025-12-03 00:30:49.816 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/Details/1 - 200 null text/html; charset=utf-8 40.1272ms
2025-12-03 00:30:49.822 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:30:49.823 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/cart.js - null null
2025-12-03 00:30:49.828 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:49.831 -05:00 [INF] The file /js/cart.js was not modified
2025-12-03 00:30:49.833 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:30:49.834 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/cart.js - 304 null text/javascript 10.6832ms
2025-12-03 00:30:49.837 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:49.843 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0129ms.
2025-12-03 00:30:49.845 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:30:49.847 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:49.849 -05:00 [INF] Executed ViewResult - view Error404 executed in 3.7626ms.
2025-12-03 00:30:49.851 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 14.425ms
2025-12-03 00:30:49.854 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:49.856 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 33.5477ms
2025-12-03 00:30:49.862 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:30:53.508 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5064/Purchase/AddToCart - application/json 30
2025-12-03 00:30:53.511 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.AddToCart (COMP2139-Assignment1)'
2025-12-03 00:30:53.514 -05:00 [INF] Route matched with {action = "AddToCart", controller = "Purchase", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToCart(System.Collections.Generic.Dictionary`2[System.String,System.Int32]) on controller COMP2139_Assignment1.Controllers.PurchaseController (COMP2139-Assignment1).
2025-12-03 00:30:53.526 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.PurchaseController.AddToCart (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:53.534 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title"
FROM "Events" AS e
WHERE e."EventId" = @__p_0
LIMIT 1
2025-12-03 00:30:53.537 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:30:53.598 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.PurchaseController.AddToCart (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 69.3047ms.
2025-12-03 00:30:53.600 -05:00 [INF] Executing JsonResult, writing value of type '<>f__AnonymousType15`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-03 00:30:53.605 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.PurchaseController.AddToCart (COMP2139-Assignment1) in 88.7134ms
2025-12-03 00:30:53.608 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.AddToCart (COMP2139-Assignment1)'
2025-12-03 00:30:53.610 -05:00 [INF] Session started; Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c, Id:d259009a-9add-c6cd-0e76-ae6c75b33bdf
2025-12-03 00:30:53.612 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5064/Purchase/AddToCart - 200 null application/json; charset=utf-8 104.5462ms
2025-12-03 00:30:53.618 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/Index - null null
2025-12-03 00:30:53.622 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1)'
2025-12-03 00:30:53.624 -05:00 [INF] Route matched with {action = "Index", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32], System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:30:53.626 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1) - Validation state: "Invalid"
2025-12-03 00:30:53.628 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title", c."CategoryId", c."Description", c."Name"
FROM "Events" AS e
INNER JOIN "Categories" AS c ON e."CategoryId" = c."CategoryId"
ORDER BY e."Title"
2025-12-03 00:30:53.631 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 3.5242ms.
2025-12-03 00:30:53.633 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:30:53.636 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CategoryId", c."Description", c."Name"
FROM "Categories" AS c
2025-12-03 00:30:53.666 -05:00 [INF] Executed ViewResult - view Index executed in 32.5508ms.
2025-12-03 00:30:53.667 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1) in 41.5208ms
2025-12-03 00:30:53.669 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1)'
2025-12-03 00:30:53.672 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/Index - 200 null text/html; charset=utf-8 53.1503ms
2025-12-03 00:30:53.677 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:30:53.683 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:53.685 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:30:53.688 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:53.690 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0102ms.
2025-12-03 00:30:53.693 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:30:53.695 -05:00 [INF] Executed ViewResult - view Error404 executed in 2.3121ms.
2025-12-03 00:30:53.697 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 8.903ms
2025-12-03 00:30:53.700 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:53.702 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 24.3547ms
2025-12-03 00:30:53.707 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:30:55.386 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:30:55.389 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:30:55.391 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:30:55.393 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:55.394 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0093ms.
2025-12-03 00:30:55.396 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:30:55.397 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 1.779ms.
2025-12-03 00:30:55.399 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 6.5891ms
2025-12-03 00:30:55.401 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:30:55.403 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 16.5847ms
2025-12-03 00:30:55.407 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:30:55.411 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/analytics.js - null null
2025-12-03 00:30:55.411 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:55.414 -05:00 [INF] The file /js/analytics.js was not modified
2025-12-03 00:30:55.415 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:30:55.417 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/analytics.js - 304 null text/javascript 5.7513ms
2025-12-03 00:30:55.419 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:55.424 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0265ms.
2025-12-03 00:30:55.426 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:30:55.428 -05:00 [INF] Executed ViewResult - view Error404 executed in 1.8879ms.
2025-12-03 00:30:55.430 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 10.613ms
2025-12-03 00:30:55.432 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:55.433 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 25.6705ms
2025-12-03 00:30:55.434 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:30:55.435 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:30:55.435 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:30:55.437 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:30:55.440 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:30:55.444 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:30:55.447 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:30:55.449 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:30:55.451 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:30:55.452 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:30:55.454 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:55.456 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:55.458 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:55.461 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 7.222ms
2025-12-03 00:30:55.462 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:30:55.463 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:30:55.464 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:30:55.466 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 5.3921ms.
2025-12-03 00:30:55.468 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 5.9781ms.
2025-12-03 00:30:55.469 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Purchase>()
    .GroupBy(p => new { 
        Year = p.PurchaseDate.Year, 
        Month = p.PurchaseDate.Month
     })
    .Select(g => new { 
        month = string.Format(
            format: "{0}-{1:00}", 
            arg0: (object)g.Key.Year, 
            arg1: (object)g.Key.Month), 
        revenue = g
            .AsQueryable()
            .Sum(e => e.TotalCost)
     })
    .OrderBy(e0 => e0.month)' could not be translated. Additional information: Translation of method 'string.Format' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth() in C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1\Controllers\EventController.cs:line 243
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-03 00:30:55.471 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:30:55.473 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:30:55.483 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:30:55.483 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 27.4468ms
2025-12-03 00:30:55.485 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 26.884ms
2025-12-03 00:30:55.486 -05:00 [INF] Route matched with {action = "Error500", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error500() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:30:55.488 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:30:55.489 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:30:55.491 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:55.493 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 57.3395ms
2025-12-03 00:30:55.494 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 58.9751ms
2025-12-03 00:30:55.496 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0137ms.
2025-12-03 00:30:55.508 -05:00 [INF] Executing ViewResult, running view Error500.
2025-12-03 00:30:55.510 -05:00 [INF] Executed ViewResult - view Error500 executed in 1.6006ms.
2025-12-03 00:30:55.511 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) in 20.1532ms
2025-12-03 00:30:55.512 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:30:55.514 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 500 null text/html; charset=utf-8 79.5125ms
2025-12-03 00:30:56.038 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Purchase/Cart - null null
2025-12-03 00:30:56.043 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Cart (COMP2139-Assignment1)'
2025-12-03 00:30:56.045 -05:00 [INF] Route matched with {action = "Cart", controller = "Purchase", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Cart() on controller COMP2139_Assignment1.Controllers.PurchaseController (COMP2139-Assignment1).
2025-12-03 00:30:56.047 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.PurchaseController.Cart (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:56.049 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.PurchaseController.Cart (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.4432ms.
2025-12-03 00:30:56.051 -05:00 [INF] Executing ViewResult, running view Cart.
2025-12-03 00:30:56.056 -05:00 [INF] Executed ViewResult - view Cart executed in 5.632ms.
2025-12-03 00:30:56.058 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.PurchaseController.Cart (COMP2139-Assignment1) in 10.9906ms
2025-12-03 00:30:56.060 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Cart (COMP2139-Assignment1)'
2025-12-03 00:30:56.061 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Purchase/Cart - 200 null text/html; charset=utf-8 22.9561ms
2025-12-03 00:30:56.067 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:30:56.071 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:56.072 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:30:56.074 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:30:56.076 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0189ms.
2025-12-03 00:30:56.078 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:30:56.080 -05:00 [INF] Executed ViewResult - view Error404 executed in 1.7077ms.
2025-12-03 00:30:56.081 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 7.163ms
2025-12-03 00:30:56.083 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:30:56.084 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 17.4924ms
2025-12-03 00:30:56.088 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:31:02.488 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Purchase/Checkout - null null
2025-12-03 00:31:02.492 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Checkout (COMP2139-Assignment1)'
2025-12-03 00:31:02.494 -05:00 [INF] Route matched with {action = "Checkout", controller = "Purchase", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Checkout() on controller COMP2139_Assignment1.Controllers.PurchaseController (COMP2139-Assignment1).
2025-12-03 00:31:02.496 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.PurchaseController.Checkout (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:31:02.497 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.PurchaseController.Checkout (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.3585ms.
2025-12-03 00:31:02.500 -05:00 [INF] Executing ViewResult, running view Checkout.
2025-12-03 00:31:02.506 -05:00 [INF] Executed ViewResult - view Checkout executed in 6.8968ms.
2025-12-03 00:31:02.508 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.PurchaseController.Checkout (COMP2139-Assignment1) in 12.1655ms
2025-12-03 00:31:02.510 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Checkout (COMP2139-Assignment1)'
2025-12-03 00:31:02.511 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Purchase/Checkout - 200 null text/html; charset=utf-8 22.8749ms
2025-12-03 00:31:02.516 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:31:02.520 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:31:02.521 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:31:02.523 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:31:02.525 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0131ms.
2025-12-03 00:31:02.527 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:31:02.528 -05:00 [INF] Executed ViewResult - view Error404 executed in 1.7624ms.
2025-12-03 00:31:02.530 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 6.8879ms
2025-12-03 00:31:02.532 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:31:02.533 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 17.1589ms
2025-12-03 00:31:02.538 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:31:27.485 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5064/Purchase/Complete - application/x-www-form-urlencoded 293
2025-12-03 00:31:27.489 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Complete (COMP2139-Assignment1)'
2025-12-03 00:31:27.492 -05:00 [INF] Route matched with {action = "Complete", controller = "Purchase", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Complete(System.String, System.String, System.String) on controller COMP2139_Assignment1.Controllers.PurchaseController (COMP2139-Assignment1).
2025-12-03 00:31:27.498 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.PurchaseController.Complete (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:31:27.502 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title"
FROM "Events" AS e
WHERE e."EventId" = @__p_0
LIMIT 1
2025-12-03 00:31:27.612 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?', @p4='?' (DbType = DateTime), @p5='?' (DbType = Int32), @p6='?' (DbType = Double)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Events" SET "AvailableTickets" = @p0
WHERE "EventId" = @p1;
INSERT INTO "Purchases" ("EventId", "GuestContactInfo", "PurchaseDate", "Quantity", "TotalCost")
VALUES (@p2, @p3, @p4, @p5, @p6)
RETURNING "PurchaseId";
2025-12-03 00:31:27.640 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.PurchaseController.Complete (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.RedirectToActionResult in 139.9236ms.
2025-12-03 00:31:27.642 -05:00 [INF] Executing RedirectResult, redirecting to /Purchase/Confirmation?purchaseId=18.
2025-12-03 00:31:27.644 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.PurchaseController.Complete (COMP2139-Assignment1) in 149.7533ms
2025-12-03 00:31:27.646 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Complete (COMP2139-Assignment1)'
2025-12-03 00:31:27.648 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5064/Purchase/Complete - 302 0 null 162.3726ms
2025-12-03 00:31:27.652 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Purchase/Confirmation?purchaseId=18 - null null
2025-12-03 00:31:27.657 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Confirmation (COMP2139-Assignment1)'
2025-12-03 00:31:27.661 -05:00 [INF] Route matched with {action = "Confirmation", controller = "Purchase", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Confirmation(Int32) on controller COMP2139_Assignment1.Controllers.PurchaseController (COMP2139-Assignment1).
2025-12-03 00:31:27.667 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.PurchaseController.Confirmation (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:31:27.682 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__purchaseId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."PurchaseId", p."EventId", p."GuestContactInfo", p."PurchaseDate", p."Quantity", p."TotalCost", e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title", c."CategoryId", c."Description", c."Name"
FROM "Purchases" AS p
INNER JOIN "Events" AS e ON p."EventId" = e."EventId"
INNER JOIN "Categories" AS c ON e."CategoryId" = c."CategoryId"
WHERE p."PurchaseId" = @__purchaseId_0
LIMIT 1
2025-12-03 00:31:27.685 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.PurchaseController.Confirmation (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 15.2948ms.
2025-12-03 00:31:27.688 -05:00 [INF] Executing ViewResult, running view Confirmation.
2025-12-03 00:31:27.693 -05:00 [INF] Executed ViewResult - view Confirmation executed in 6.0121ms.
2025-12-03 00:31:27.695 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.PurchaseController.Confirmation (COMP2139-Assignment1) in 31.6036ms
2025-12-03 00:31:27.698 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Confirmation (COMP2139-Assignment1)'
2025-12-03 00:31:27.699 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Purchase/Confirmation?purchaseId=18 - 200 null text/html; charset=utf-8 46.9275ms
2025-12-03 00:31:27.705 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:31:27.710 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:31:27.713 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:31:27.716 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:31:27.718 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0159ms.
2025-12-03 00:31:27.721 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:31:27.723 -05:00 [INF] Executed ViewResult - view Error404 executed in 2.207ms.
2025-12-03 00:31:27.725 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 9.1734ms
2025-12-03 00:31:27.727 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:31:27.729 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 24.1143ms
2025-12-03 00:31:27.735 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:31:29.016 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:31:29.019 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:31:29.021 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:31:29.023 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:31:29.024 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0154ms.
2025-12-03 00:31:29.026 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:31:29.028 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 1.8058ms.
2025-12-03 00:31:29.030 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 6.9809ms
2025-12-03 00:31:29.031 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:31:29.033 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 16.9868ms
2025-12-03 00:31:29.038 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:31:29.042 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/analytics.js - null null
2025-12-03 00:31:29.042 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:31:29.045 -05:00 [INF] The file /js/analytics.js was not modified
2025-12-03 00:31:29.046 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:31:29.047 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/analytics.js - 304 null text/javascript 5.692ms
2025-12-03 00:31:29.050 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:31:29.055 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0129ms.
2025-12-03 00:31:29.057 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:31:29.059 -05:00 [INF] Executed ViewResult - view Error404 executed in 1.9231ms.
2025-12-03 00:31:29.061 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 10.5988ms
2025-12-03 00:31:29.063 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:31:29.064 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 25.5138ms
2025-12-03 00:31:29.066 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:31:29.067 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:31:29.067 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:31:29.068 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:31:29.072 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:31:29.075 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:31:29.079 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:31:29.082 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:31:29.083 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:31:29.085 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:31:29.087 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:31:29.089 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:31:29.091 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:31:29.094 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 7.358ms
2025-12-03 00:31:29.095 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:31:29.097 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:31:29.098 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:31:29.100 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 6.2525ms.
2025-12-03 00:31:29.103 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 7.0453ms.
2025-12-03 00:31:29.104 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Purchase>()
    .GroupBy(p => new { 
        Year = p.PurchaseDate.Year, 
        Month = p.PurchaseDate.Month
     })
    .Select(g => new { 
        month = string.Format(
            format: "{0}-{1:00}", 
            arg0: (object)g.Key.Year, 
            arg1: (object)g.Key.Month), 
        revenue = g
            .AsQueryable()
            .Sum(e => e.TotalCost)
     })
    .OrderBy(e0 => e0.month)' could not be translated. Additional information: Translation of method 'string.Format' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth() in C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1\Controllers\EventController.cs:line 243
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-03 00:31:29.106 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:31:29.108 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:31:29.119 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:31:29.120 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 30.9016ms
2025-12-03 00:31:29.122 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 30.2143ms
2025-12-03 00:31:29.123 -05:00 [INF] Route matched with {action = "Error500", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error500() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:31:29.124 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:31:29.126 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:31:29.129 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:31:29.130 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 63.0728ms
2025-12-03 00:31:29.132 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 64.9507ms
2025-12-03 00:31:29.134 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0157ms.
2025-12-03 00:31:29.148 -05:00 [INF] Executing ViewResult, running view Error500.
2025-12-03 00:31:29.150 -05:00 [INF] Executed ViewResult - view Error500 executed in 1.7795ms.
2025-12-03 00:31:29.151 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) in 22.3643ms
2025-12-03 00:31:29.153 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:31:29.154 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 500 null text/html; charset=utf-8 87.8552ms
2025-12-03 00:41:51.576 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:41:51.579 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:41:51.581 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:41:51.584 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:41:51.585 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.008ms.
2025-12-03 00:41:51.588 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:41:51.598 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 10.7266ms.
2025-12-03 00:41:51.599 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 15.6086ms
2025-12-03 00:41:51.601 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:41:51.602 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 26.158ms
2025-12-03 00:41:51.608 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:41:51.608 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/analytics.js - null null
2025-12-03 00:41:51.614 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:41:51.614 -05:00 [INF] The file /js/analytics.js was not modified
2025-12-03 00:41:51.616 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:41:51.616 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/analytics.js - 304 null text/javascript 7.6001ms
2025-12-03 00:41:51.618 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:41:51.622 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0058ms.
2025-12-03 00:41:51.624 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:41:51.627 -05:00 [INF] Executed ViewResult - view Error404 executed in 2.7536ms.
2025-12-03 00:41:51.628 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 9.8706ms
2025-12-03 00:41:51.629 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:41:51.631 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 22.7809ms
2025-12-03 00:41:51.634 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:41:51.644 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:41:51.645 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:41:51.645 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:41:51.649 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:41:51.650 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:41:51.653 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:41:51.656 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:41:51.657 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:41:51.658 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:41:51.658 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:41:51.660 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:41:51.662 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:41:51.666 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 7.2735ms
2025-12-03 00:41:51.669 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:41:51.670 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Purchase>()
    .GroupBy(p => new { 
        Year = p.PurchaseDate.Year, 
        Month = p.PurchaseDate.Month
     })
    .Select(g => new { 
        month = string.Format(
            format: "{0}-{1:00}", 
            arg0: (object)g.Key.Year, 
            arg1: (object)g.Key.Month), 
        revenue = g
            .AsQueryable()
            .Sum(e => e.TotalCost)
     })
    .OrderBy(e0 => e0.month)' could not be translated. Additional information: Translation of method 'string.Format' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-03 00:41:51.685 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:41:51.687 -05:00 [INF] Route matched with {action = "Error500", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error500() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:41:51.694 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:41:51.696 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0098ms.
2025-12-03 00:41:51.697 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:41:51.698 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:41:51.699 -05:00 [INF] Executing ViewResult, running view Error500.
2025-12-03 00:41:51.700 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 35.2377ms.
2025-12-03 00:41:51.703 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 35.8962ms.
2025-12-03 00:41:51.705 -05:00 [INF] Executed ViewResult - view Error500 executed in 7.2642ms.
2025-12-03 00:41:51.706 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:41:51.708 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:41:51.709 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) in 15.4838ms
2025-12-03 00:41:51.712 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 51.6347ms
2025-12-03 00:41:51.713 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 50.687ms
2025-12-03 00:41:51.714 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:41:51.716 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:41:51.718 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:41:51.719 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 500 null text/html; charset=utf-8 74.4378ms
2025-12-03 00:41:51.720 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 75.2045ms
2025-12-03 00:41:51.722 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 76.7693ms
2025-12-03 00:42:03.989 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:42:03.992 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:42:03.994 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:42:03.996 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:03.997 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0057ms.
2025-12-03 00:42:04.000 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:42:04.010 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 10.9087ms.
2025-12-03 00:42:04.012 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 15.4156ms
2025-12-03 00:42:04.013 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:42:04.015 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 26.3563ms
2025-12-03 00:42:04.019 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:42:04.024 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:42:04.026 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:42:04.028 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:04.030 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0069ms.
2025-12-03 00:42:04.032 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:42:04.034 -05:00 [INF] Executed ViewResult - view Error404 executed in 2.582ms.
2025-12-03 00:42:04.036 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 7.1996ms
2025-12-03 00:42:04.037 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:42:04.038 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 19.3665ms
2025-12-03 00:42:04.042 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:42:04.046 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:42:04.046 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:42:04.047 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:42:04.051 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:42:04.052 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:42:04.056 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:42:04.059 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:42:04.060 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:42:04.062 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:42:04.062 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:04.065 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:04.066 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:04.069 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 7.0915ms
2025-12-03 00:42:04.070 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:42:04.072 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:42:04.072 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:42:04.074 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 5.569ms.
2025-12-03 00:42:04.077 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 6.0814ms.
2025-12-03 00:42:04.078 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Purchase>()
    .GroupBy(p => new { 
        Year = p.PurchaseDate.Year, 
        Month = p.PurchaseDate.Month
     })
    .Select(g => new { 
        month = string.Format(
            format: "{0}-{1:00}", 
            arg0: (object)g.Key.Year, 
            arg1: (object)g.Key.Month), 
        revenue = g
            .AsQueryable()
            .Sum(e => e.TotalCost)
     })
    .OrderBy(e0 => e0.month)' could not be translated. Additional information: Translation of method 'string.Format' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-03 00:42:04.080 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:42:04.081 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:42:04.090 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:42:04.092 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 28.0394ms
2025-12-03 00:42:04.094 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 27.1981ms
2025-12-03 00:42:04.095 -05:00 [INF] Route matched with {action = "Error500", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error500() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:42:04.096 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:42:04.098 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:42:04.100 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:04.101 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 54.6813ms
2025-12-03 00:42:04.103 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 55.6507ms
2025-12-03 00:42:04.104 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0125ms.
2025-12-03 00:42:04.116 -05:00 [INF] Executing ViewResult, running view Error500.
2025-12-03 00:42:04.118 -05:00 [INF] Executed ViewResult - view Error500 executed in 2.5451ms.
2025-12-03 00:42:04.119 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) in 19.7779ms
2025-12-03 00:42:04.121 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:42:04.122 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 500 null text/html; charset=utf-8 75.5391ms
2025-12-03 00:42:16.243 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:42:16.246 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:42:16.248 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:42:16.251 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:16.252 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0071ms.
2025-12-03 00:42:16.254 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:42:16.263 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 9.6287ms.
2025-12-03 00:42:16.265 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 14.6082ms
2025-12-03 00:42:16.267 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:42:16.268 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 24.9811ms
2025-12-03 00:42:16.272 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:42:16.278 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:42:16.280 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:42:16.282 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:16.283 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0065ms.
2025-12-03 00:42:16.286 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:42:16.288 -05:00 [INF] Executed ViewResult - view Error404 executed in 2.4913ms.
2025-12-03 00:42:16.289 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 7.5175ms
2025-12-03 00:42:16.291 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:42:16.292 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 20.3311ms
2025-12-03 00:42:16.296 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:42:16.296 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:42:16.296 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:42:16.297 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:42:16.303 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:42:16.305 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:42:16.308 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:42:16.312 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:42:16.312 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:42:16.314 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:42:16.314 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:16.316 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:16.318 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:16.321 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:42:16.323 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 6.5696ms
2025-12-03 00:42:16.324 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:42:16.325 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 5.5693ms.
2025-12-03 00:42:16.326 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:42:16.329 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 6.1408ms.
2025-12-03 00:42:16.331 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:42:16.332 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Purchase>()
    .GroupBy(p => new { 
        Year = p.PurchaseDate.Year, 
        Month = p.PurchaseDate.Month
     })
    .Select(g => new { 
        month = string.Format(
            format: "{0}-{1:00}", 
            arg0: (object)g.Key.Year, 
            arg1: (object)g.Key.Month), 
        revenue = g
            .AsQueryable()
            .Sum(e => e.TotalCost)
     })
    .OrderBy(e0 => e0.month)' could not be translated. Additional information: Translation of method 'string.Format' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-03 00:42:16.334 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:42:16.337 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 22.3136ms
2025-12-03 00:42:16.347 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:42:16.349 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 30.8974ms
2025-12-03 00:42:16.350 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:42:16.352 -05:00 [INF] Route matched with {action = "Error500", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error500() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:42:16.354 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:42:16.356 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 59.1053ms
2025-12-03 00:42:16.358 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:42:16.359 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 62.5253ms
2025-12-03 00:42:16.366 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0131ms.
2025-12-03 00:42:16.374 -05:00 [INF] Executing ViewResult, running view Error500.
2025-12-03 00:42:16.376 -05:00 [INF] Executed ViewResult - view Error500 executed in 3.1018ms.
2025-12-03 00:42:16.378 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) in 20.266ms
2025-12-03 00:42:16.379 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:42:16.381 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 500 null text/html; charset=utf-8 84.2242ms
2025-12-03 00:43:23.169 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Purchase - null null
2025-12-03 00:43:23.172 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1)'
2025-12-03 00:43:23.175 -05:00 [INF] Route matched with {action = "Index", controller = "Purchase", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller COMP2139_Assignment1.Controllers.PurchaseController (COMP2139-Assignment1).
2025-12-03 00:43:23.177 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:23.180 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."PurchaseId", p."EventId", p."GuestContactInfo", p."PurchaseDate", p."Quantity", p."TotalCost", e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title"
FROM "Purchases" AS p
INNER JOIN "Events" AS e ON p."EventId" = e."EventId"
2025-12-03 00:43:23.183 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 4.0026ms.
2025-12-03 00:43:23.185 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:43:23.189 -05:00 [INF] Executed ViewResult - view Index executed in 3.5423ms.
2025-12-03 00:43:23.191 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1) in 13.4075ms
2025-12-03 00:43:23.193 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1)'
2025-12-03 00:43:23.195 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Purchase - 200 null text/html; charset=utf-8 25.4247ms
2025-12-03 00:43:23.201 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:43:23.210 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:43:23.213 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:43:23.216 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:23.219 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.009ms.
2025-12-03 00:43:23.222 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:43:23.224 -05:00 [INF] Executed ViewResult - view Error404 executed in 2.1176ms.
2025-12-03 00:43:23.227 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 10.7504ms
2025-12-03 00:43:23.230 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:43:23.232 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 31.0249ms
2025-12-03 00:43:23.239 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:43:28.711 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:43:28.715 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:43:28.716 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:43:28.718 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:28.719 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0055ms.
2025-12-03 00:43:28.721 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:43:28.723 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 1.5382ms.
2025-12-03 00:43:28.724 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 6.1893ms
2025-12-03 00:43:28.726 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:43:28.728 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 16.4571ms
2025-12-03 00:43:28.735 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:43:28.737 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/analytics.js - null null
2025-12-03 00:43:28.738 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:43:28.741 -05:00 [INF] The file /js/analytics.js was not modified
2025-12-03 00:43:28.742 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:43:28.744 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/analytics.js - 304 null text/javascript 7.2295ms
2025-12-03 00:43:28.746 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:28.751 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0084ms.
2025-12-03 00:43:28.753 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:43:28.755 -05:00 [INF] Executed ViewResult - view Error404 executed in 1.7528ms.
2025-12-03 00:43:28.757 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 10.8252ms
2025-12-03 00:43:28.758 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:43:28.760 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 25.2162ms
2025-12-03 00:43:28.762 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:43:28.763 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:43:28.763 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:43:28.765 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:43:28.768 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:43:28.771 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:43:28.775 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:43:28.778 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:43:28.780 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:43:28.781 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:43:28.783 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:28.785 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:28.787 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:28.790 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 6.6921ms
2025-12-03 00:43:28.791 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:43:28.792 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:43:28.793 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:43:28.795 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 5.5813ms.
2025-12-03 00:43:28.798 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 6.6419ms.
2025-12-03 00:43:28.799 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Purchase>()
    .GroupBy(p => new { 
        Year = p.PurchaseDate.Year, 
        Month = p.PurchaseDate.Month
     })
    .Select(g => new { 
        month = string.Format(
            format: "{0}-{1:00}", 
            arg0: (object)g.Key.Year, 
            arg1: (object)g.Key.Month), 
        revenue = g
            .AsQueryable()
            .Sum(e => e.TotalCost)
     })
    .OrderBy(e0 => e0.month)' could not be translated. Additional information: Translation of method 'string.Format' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-03 00:43:28.801 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:43:28.803 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:43:28.814 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 28.8044ms
2025-12-03 00:43:28.815 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:43:28.816 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 28.5897ms
2025-12-03 00:43:28.821 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:43:28.819 -05:00 [INF] Route matched with {action = "Error500", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error500() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:43:28.818 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:43:28.822 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 59.104ms
2025-12-03 00:43:28.825 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:28.826 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 63.0809ms
2025-12-03 00:43:28.834 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0101ms.
2025-12-03 00:43:28.841 -05:00 [INF] Executing ViewResult, running view Error500.
2025-12-03 00:43:28.842 -05:00 [INF] Executed ViewResult - view Error500 executed in 1.7541ms.
2025-12-03 00:43:28.844 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) in 19.7623ms
2025-12-03 00:43:28.846 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:43:28.847 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 500 null text/html; charset=utf-8 84.844ms
2025-12-03 00:43:48.180 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:43:48.183 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:43:48.184 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:43:48.186 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:48.188 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0063ms.
2025-12-03 00:43:48.189 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:43:48.191 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 1.5645ms.
2025-12-03 00:43:48.192 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 5.9742ms
2025-12-03 00:43:48.194 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:43:48.195 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 15.2803ms
2025-12-03 00:43:48.200 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:43:48.203 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:43:48.205 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:43:48.207 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:48.208 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0074ms.
2025-12-03 00:43:48.210 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:43:48.212 -05:00 [INF] Executed ViewResult - view Error404 executed in 1.5327ms.
2025-12-03 00:43:48.213 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 6.4464ms
2025-12-03 00:43:48.215 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:43:48.216 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 15.7819ms
2025-12-03 00:43:48.219 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:43:48.221 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:43:48.221 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:43:48.221 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:43:48.225 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:43:48.227 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:43:48.230 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:43:48.231 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:43:48.233 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:43:48.234 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:43:48.236 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:48.238 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:48.240 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:48.243 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 7.1626ms
2025-12-03 00:43:48.245 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:43:48.245 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:43:48.246 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:43:48.248 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 5.1461ms.
2025-12-03 00:43:48.250 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 5.976ms.
2025-12-03 00:43:48.251 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Purchase>()
    .GroupBy(p => new { 
        Year = p.PurchaseDate.Year, 
        Month = p.PurchaseDate.Month
     })
    .Select(g => new { 
        month = string.Format(
            format: "{0}-{1:00}", 
            arg0: (object)g.Key.Year, 
            arg1: (object)g.Key.Month), 
        revenue = g
            .AsQueryable()
            .Sum(e => e.TotalCost)
     })
    .OrderBy(e0 => e0.month)' could not be translated. Additional information: Translation of method 'string.Format' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth()
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-03 00:43:48.253 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:43:48.255 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:43:48.264 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:43:48.265 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 26.8585ms
2025-12-03 00:43:48.266 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 25.9845ms
2025-12-03 00:43:48.268 -05:00 [INF] Route matched with {action = "Error500", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error500() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:43:48.269 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:43:48.271 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:43:48.273 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:48.274 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 53.4262ms
2025-12-03 00:43:48.276 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 54.3282ms
2025-12-03 00:43:48.277 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0066ms.
2025-12-03 00:43:48.289 -05:00 [INF] Executing ViewResult, running view Error500.
2025-12-03 00:43:48.291 -05:00 [INF] Executed ViewResult - view Error500 executed in 1.4209ms.
2025-12-03 00:43:48.292 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) in 19.4032ms
2025-12-03 00:43:48.293 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:43:48.294 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 500 null text/html; charset=utf-8 73.6209ms
2025-12-03 00:43:50.563 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:43:50.566 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:43:50.568 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:43:50.570 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:50.570 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/.well-known/appspecific/com.chrome.devtools.json - null null
2025-12-03 00:43:50.572 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0077ms.
2025-12-03 00:43:50.576 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:43:50.577 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:43:50.578 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:43:50.580 -05:00 [INF] Executed ViewResult - view Error404 executed in 2.6188ms.
2025-12-03 00:43:50.582 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:43:50.583 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 13.1836ms
2025-12-03 00:43:50.585 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0056ms.
2025-12-03 00:43:50.586 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:43:50.588 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:43:50.589 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 26.4397ms
2025-12-03 00:43:50.591 -05:00 [INF] Executed ViewResult - view Error404 executed in 2.7592ms.
2025-12-03 00:43:50.594 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:43:50.595 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 13.4874ms
2025-12-03 00:43:50.599 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:43:50.600 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/.well-known/appspecific/com.chrome.devtools.json - 404 null text/html; charset=utf-8 29.4664ms
2025-12-03 00:43:50.604 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-12-03 00:43:50.607 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - null null
2025-12-03 00:43:50.614 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/lib/bootstrap/dist/css/bootstrap.min.css.map - null null
2025-12-03 00:43:50.641 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: 'C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js.map'
2025-12-03 00:43:50.642 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - 200 332090 text/plain 35.2677ms
2025-12-03 00:43:50.644 -05:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css.map'. Physical path: 'C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1\wwwroot\lib\bootstrap\dist\css\bootstrap.min.css.map'
2025-12-03 00:43:50.648 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/lib/bootstrap/dist/css/bootstrap.min.css.map - 200 589892 text/plain 34.1835ms
2025-12-03 00:45:28.055 -05:00 [INF] Application is shutting down...
2025-12-03 00:45:34.595 -05:00 [INF] User profile is available. Using 'C:\Users\janik\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-03 00:45:35.514 -05:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:45:35.587 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:45:35.591 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:45:35.600 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-12-03 00:45:35.801 -05:00 [INF] Now listening on: http://localhost:5064
2025-12-03 00:45:35.804 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-03 00:45:35.805 -05:00 [INF] Hosting environment: Development
2025-12-03 00:45:35.806 -05:00 [INF] Content root path: C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1
2025-12-03 00:45:35.899 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/ - null null
2025-12-03 00:45:35.908 -05:00 [WRN] Failed to determine the https port for redirect.
2025-12-03 00:45:35.960 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1)'
2025-12-03 00:45:35.966 -05:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:45:35.973 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:45:35.977 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.2588ms.
2025-12-03 00:45:35.985 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:45:36.002 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:45:36.048 -05:00 [INF] Executed ViewResult - view Index executed in 62.0889ms.
2025-12-03 00:45:36.050 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1) in 81.7723ms
2025-12-03 00:45:36.053 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1)'
2025-12-03 00:45:36.059 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/ - 200 null text/html; charset=utf-8 161.0206ms
2025-12-03 00:45:36.065 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:45:36.107 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:45:36.110 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:45:36.113 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:45:36.115 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.1507ms.
2025-12-03 00:45:36.117 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:45:36.121 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:45:36.124 -05:00 [INF] Executed ViewResult - view Error404 executed in 6.9537ms.
2025-12-03 00:45:36.125 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 12.8589ms
2025-12-03 00:45:36.127 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:45:36.129 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 63.33ms
2025-12-03 00:45:36.133 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:47:06.132 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:47:06.147 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:47:06.149 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:47:06.152 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:06.154 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.139ms.
2025-12-03 00:47:06.157 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:47:06.161 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:47:06.165 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 8.8883ms.
2025-12-03 00:47:06.167 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 15.1288ms
2025-12-03 00:47:06.169 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:47:06.171 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 39.0179ms
2025-12-03 00:47:06.176 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:47:06.179 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/analytics.js - null null
2025-12-03 00:47:06.188 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:47:06.189 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:47:06.190 -05:00 [INF] Sending file. Request path: '/js/analytics.js'. Physical path: 'C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1\wwwroot\js\analytics.js'
2025-12-03 00:47:06.192 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:06.193 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/analytics.js - 200 1898 text/javascript 14.2283ms
2025-12-03 00:47:06.195 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0219ms.
2025-12-03 00:47:06.201 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:47:06.202 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:47:06.204 -05:00 [INF] Executed ViewResult - view Error404 executed in 3.421ms.
2025-12-03 00:47:06.206 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 14.227ms
2025-12-03 00:47:06.208 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:47:06.209 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 32.9995ms
2025-12-03 00:47:06.211 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:47:06.212 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:47:06.212 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:47:06.213 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:47:06.219 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:47:06.221 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:47:06.223 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:47:06.231 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:47:06.231 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:47:06.232 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:47:06.234 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:06.236 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:06.238 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:06.328 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 91.6576ms
2025-12-03 00:47:06.330 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:47:06.332 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Purchase>()
    .GroupBy(p => new { 
        Year = p.PurchaseDate.Year, 
        Month = p.PurchaseDate.Month
     })
    .Select(g => new { 
        month = string.Format(
            format: "{0}-{1:00}", 
            arg0: (object)g.Key.Year, 
            arg1: (object)g.Key.Month), 
        revenue = g
            .AsQueryable()
            .Sum(e => e.TotalCost)
     })
    .OrderBy(e0 => e0.month)' could not be translated. Additional information: Translation of method 'string.Format' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth() in C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1\Controllers\EventController.cs:line 243
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-03 00:47:06.341 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:47:06.358 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 118.4512ms.
2025-12-03 00:47:06.364 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:47:06.366 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:47:06.369 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 126.7493ms.
2025-12-03 00:47:06.372 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:47:06.374 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:47:06.377 -05:00 [INF] Route matched with {action = "Error500", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error500() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:47:06.380 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:06.382 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.1548ms.
2025-12-03 00:47:06.385 -05:00 [INF] Executing ViewResult, running view Error500.
2025-12-03 00:47:06.388 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 154.1379ms
2025-12-03 00:47:06.388 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 149.9179ms
2025-12-03 00:47:06.388 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:47:06.390 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:47:06.392 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:47:06.394 -05:00 [INF] Executed ViewResult - view Error500 executed in 9.9497ms.
2025-12-03 00:47:06.399 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) in 18.9887ms
2025-12-03 00:47:06.401 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:47:06.402 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 500 null text/html; charset=utf-8 191.389ms
2025-12-03 00:47:06.403 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 191.2809ms
2025-12-03 00:47:06.403 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 191.1534ms
2025-12-03 00:47:08.083 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:47:08.092 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/.well-known/appspecific/com.chrome.devtools.json - null null
2025-12-03 00:47:08.093 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:47:08.096 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:47:08.095 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:47:08.099 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:08.101 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:47:08.102 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0257ms.
2025-12-03 00:47:08.104 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:08.106 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:47:08.107 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0141ms.
2025-12-03 00:47:08.108 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:47:08.110 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:47:08.112 -05:00 [INF] Executed ViewResult - view Error404 executed in 6.1392ms.
2025-12-03 00:47:08.112 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:47:08.114 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 14.4424ms
2025-12-03 00:47:08.115 -05:00 [INF] Executed ViewResult - view Error404 executed in 5.5233ms.
2025-12-03 00:47:08.116 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:47:08.118 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 14.2465ms
2025-12-03 00:47:08.119 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 35.9475ms
2025-12-03 00:47:08.121 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:47:08.125 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:47:08.126 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/.well-known/appspecific/com.chrome.devtools.json - 404 null text/html; charset=utf-8 34.3906ms
2025-12-03 00:47:08.132 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-12-03 00:47:18.579 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:47:18.583 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:47:18.585 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:47:18.587 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:18.588 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0151ms.
2025-12-03 00:47:18.590 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:47:18.592 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:47:18.593 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 3.0918ms.
2025-12-03 00:47:18.595 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 8.1625ms
2025-12-03 00:47:18.596 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:47:18.598 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 18.5266ms
2025-12-03 00:47:18.603 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:47:18.606 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/.well-known/appspecific/com.chrome.devtools.json - null null
2025-12-03 00:47:18.606 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/analytics.js - null null
2025-12-03 00:47:18.607 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:47:18.610 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:47:18.613 -05:00 [INF] The file /js/analytics.js was not modified
2025-12-03 00:47:18.614 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:47:18.616 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:47:18.617 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/analytics.js - 304 null text/javascript 11.3142ms
2025-12-03 00:47:18.619 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:18.621 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:18.626 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0151ms.
2025-12-03 00:47:18.627 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0097ms.
2025-12-03 00:47:18.630 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:47:18.632 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:47:18.633 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:47:18.634 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:47:18.636 -05:00 [INF] Executed ViewResult - view Error404 executed in 6.169ms.
2025-12-03 00:47:18.637 -05:00 [INF] Executed ViewResult - view Error404 executed in 5.3652ms.
2025-12-03 00:47:18.639 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 19.4702ms
2025-12-03 00:47:18.640 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 18.8603ms
2025-12-03 00:47:18.642 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:47:18.643 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:47:18.645 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 41.8699ms
2025-12-03 00:47:18.646 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/.well-known/appspecific/com.chrome.devtools.json - 404 null text/html; charset=utf-8 40.2861ms
2025-12-03 00:47:18.650 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:47:18.653 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-12-03 00:47:18.666 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:47:18.667 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:47:18.667 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:47:18.670 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:47:18.672 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:47:18.675 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:47:18.676 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:47:18.678 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:47:18.679 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:47:18.681 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:18.684 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:18.686 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:18.700 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:47:18.700 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:47:18.701 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 20.1826ms
2025-12-03 00:47:18.709 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 17.6229ms.
2025-12-03 00:47:18.712 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 23.2416ms.
2025-12-03 00:47:18.713 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:47:18.716 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:47:18.718 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:47:18.719 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Purchase>()
    .GroupBy(p => new { 
        Year = p.PurchaseDate.Year, 
        Month = p.PurchaseDate.Month
     })
    .Select(g => new { 
        month = string.Format(
            format: "{0}-{1:00}", 
            arg0: (object)g.Key.Year, 
            arg1: (object)g.Key.Month), 
        revenue = g
            .AsQueryable()
            .Sum(e => e.TotalCost)
     })
    .OrderBy(e0 => e0.month)' could not be translated. Additional information: Translation of method 'string.Format' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth() in C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1\Controllers\EventController.cs:line 243
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.StatusCodePagesMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-03 00:47:18.721 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 35.0812ms
2025-12-03 00:47:18.722 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 38.7311ms
2025-12-03 00:47:18.733 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:47:18.735 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:47:18.735 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:47:18.737 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 69.5959ms
2025-12-03 00:47:18.738 -05:00 [INF] Route matched with {action = "Error500", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error500() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:47:18.739 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 72.4597ms
2025-12-03 00:47:18.747 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:47:18.753 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0202ms.
2025-12-03 00:47:18.755 -05:00 [INF] Executing ViewResult, running view Error500.
2025-12-03 00:47:18.756 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:47:18.758 -05:00 [INF] Executed ViewResult - view Error500 executed in 2.9141ms.
2025-12-03 00:47:18.759 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1) in 12.3259ms
2025-12-03 00:47:18.761 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error500 (COMP2139-Assignment1)'
2025-12-03 00:47:18.762 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 500 null text/html; charset=utf-8 96.4062ms
2025-12-03 00:49:00.998 -05:00 [INF] Application is shutting down...
2025-12-03 00:49:41.660 -05:00 [INF] User profile is available. Using 'C:\Users\janik\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-03 00:49:42.712 -05:00 [INF] Executed DbCommand (69ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:49:42.798 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:49:42.802 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:49:42.817 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-12-03 00:49:43.014 -05:00 [INF] Now listening on: http://localhost:5064
2025-12-03 00:49:43.016 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-03 00:49:43.017 -05:00 [INF] Hosting environment: Development
2025-12-03 00:49:43.019 -05:00 [INF] Content root path: C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1
2025-12-03 00:49:43.335 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/ - null null
2025-12-03 00:49:43.344 -05:00 [WRN] Failed to determine the https port for redirect.
2025-12-03 00:49:43.401 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1)'
2025-12-03 00:49:43.408 -05:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:49:43.416 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:49:43.421 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.3244ms.
2025-12-03 00:49:43.431 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:49:43.448 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:49:43.501 -05:00 [INF] Executed ViewResult - view Index executed in 70.2208ms.
2025-12-03 00:49:43.504 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1) in 92.1733ms
2025-12-03 00:49:43.506 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1)'
2025-12-03 00:49:43.506 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:49:43.511 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/ - 200 null text/html; charset=utf-8 177.1401ms
2025-12-03 00:49:43.558 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:49:43.561 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:49:43.563 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:49:43.565 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.1851ms.
2025-12-03 00:49:43.568 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:49:43.572 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:49:43.574 -05:00 [INF] Executed ViewResult - view Error404 executed in 6.9592ms.
2025-12-03 00:49:43.576 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 12.9358ms
2025-12-03 00:49:43.578 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:49:43.579 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 73.15ms
2025-12-03 00:49:43.583 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:49:50.307 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:49:50.329 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:49:50.332 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:49:50.334 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:49:50.336 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.126ms.
2025-12-03 00:49:50.338 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:49:50.342 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:49:50.346 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 7.9182ms.
2025-12-03 00:49:50.347 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 13.38ms
2025-12-03 00:49:50.349 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:49:50.351 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 43.672ms
2025-12-03 00:49:50.356 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:49:50.357 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/analytics.js - null null
2025-12-03 00:49:50.366 -05:00 [INF] The file /js/analytics.js was not modified
2025-12-03 00:49:50.367 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:49:50.368 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/analytics.js - 304 null text/javascript 10.5346ms
2025-12-03 00:49:50.369 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:49:50.375 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:49:50.377 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0203ms.
2025-12-03 00:49:50.379 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:49:50.381 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:49:50.382 -05:00 [INF] Executed ViewResult - view Error404 executed in 3.2005ms.
2025-12-03 00:49:50.384 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 9.625ms
2025-12-03 00:49:50.386 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:49:50.387 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 30.6319ms
2025-12-03 00:49:50.389 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:49:50.390 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:49:50.390 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:49:50.391 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:49:50.396 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:49:50.398 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:49:50.401 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:49:50.408 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:49:50.408 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:49:50.409 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:49:50.410 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:49:50.412 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:49:50.414 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:49:50.507 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."TotalCost"), 0.0) AS "Revenue"
FROM (
    SELECT p."TotalCost", date_part('year', p."PurchaseDate" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."PurchaseDate" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Purchases" AS p
) AS p0
GROUP BY p0."Year", p0."Month"
ORDER BY p0."Year", p0."Month"
2025-12-03 00:49:50.516 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 99.7939ms.
2025-12-03 00:49:50.522 -05:00 [INF] Executing JsonResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[<>f__AnonymousType11`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:49:50.531 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:49:50.531 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:49:50.534 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 119.239ms.
2025-12-03 00:49:50.537 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 119.0524ms.
2025-12-03 00:49:50.539 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType14`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:49:50.541 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:49:50.547 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 135.1211ms
2025-12-03 00:49:50.547 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 137.1865ms
2025-12-03 00:49:50.547 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 133.4479ms
2025-12-03 00:49:50.550 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:49:50.551 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:49:50.553 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:49:50.562 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 172.2283ms
2025-12-03 00:49:50.562 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 200 null application/json; charset=utf-8 172.9201ms
2025-12-03 00:49:50.562 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 171.911ms
2025-12-03 00:50:13.886 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Purchase - null null
2025-12-03 00:50:13.890 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1)'
2025-12-03 00:50:13.893 -05:00 [INF] Route matched with {action = "Index", controller = "Purchase", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller COMP2139_Assignment1.Controllers.PurchaseController (COMP2139-Assignment1).
2025-12-03 00:50:13.896 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:50:13.925 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."PurchaseId", p."EventId", p."GuestContactInfo", p."PurchaseDate", p."Quantity", p."TotalCost", e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title"
FROM "Purchases" AS p
INNER JOIN "Events" AS e ON p."EventId" = e."EventId"
2025-12-03 00:50:13.962 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 64.4004ms.
2025-12-03 00:50:13.964 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:50:13.974 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:50:13.976 -05:00 [INF] Executed ViewResult - view Index executed in 12.0583ms.
2025-12-03 00:50:13.978 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1) in 82.4203ms
2025-12-03 00:50:13.980 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1)'
2025-12-03 00:50:13.982 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Purchase - 200 null text/html; charset=utf-8 96.0225ms
2025-12-03 00:50:13.988 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:50:13.993 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:50:13.995 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:50:13.998 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:50:14.000 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0151ms.
2025-12-03 00:50:14.002 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:50:14.004 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:50:14.006 -05:00 [INF] Executed ViewResult - view Error404 executed in 4.3638ms.
2025-12-03 00:50:14.009 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 11.1338ms
2025-12-03 00:50:14.011 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:50:14.013 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 25.6836ms
2025-12-03 00:50:14.019 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:50:25.519 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - null null
2025-12-03 00:50:25.523 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:50:25.524 -05:00 [INF] Route matched with {action = "MyAnalytics", controller = "Event", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult MyAnalytics() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:50:25.526 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:50:25.528 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0117ms.
2025-12-03 00:50:25.529 -05:00 [INF] Executing ViewResult, running view MyAnalytics.
2025-12-03 00:50:25.531 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:50:25.532 -05:00 [INF] Executed ViewResult - view MyAnalytics executed in 3.2359ms.
2025-12-03 00:50:25.534 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1) in 7.8195ms
2025-12-03 00:50:25.536 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.MyAnalytics (COMP2139-Assignment1)'
2025-12-03 00:50:25.537 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/MyAnalytics - 200 null text/html; charset=utf-8 18.6644ms
2025-12-03 00:50:25.543 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:50:25.545 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/analytics.js - null null
2025-12-03 00:50:25.547 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:50:25.549 -05:00 [INF] The file /js/analytics.js was not modified
2025-12-03 00:50:25.550 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:50:25.551 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/analytics.js - 304 null text/javascript 5.8967ms
2025-12-03 00:50:25.554 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:50:25.558 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0151ms.
2025-12-03 00:50:25.560 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:50:25.561 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:50:25.563 -05:00 [INF] Executed ViewResult - view Error404 executed in 2.9302ms.
2025-12-03 00:50:25.565 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 11.272ms
2025-12-03 00:50:25.566 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:50:25.568 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 24.5688ms
2025-12-03 00:50:25.570 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - null null
2025-12-03 00:50:25.570 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - null null
2025-12-03 00:50:25.570 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - null null
2025-12-03 00:50:25.572 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:50:25.576 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:50:25.578 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:50:25.581 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:50:25.585 -05:00 [INF] Route matched with {action = "GetRevenuePerMonth", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRevenuePerMonth() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:50:25.586 -05:00 [INF] Route matched with {action = "GetSalesByCategory", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSalesByCategory() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:50:25.587 -05:00 [INF] Route matched with {action = "GetTopEvents", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopEvents() on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:50:25.589 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:50:25.591 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:50:25.593 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:50:25.597 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Year", p0."Month", COALESCE(sum(p0."TotalCost"), 0.0) AS "Revenue"
FROM (
    SELECT p."TotalCost", date_part('year', p."PurchaseDate" AT TIME ZONE 'UTC')::int AS "Year", date_part('month', p."PurchaseDate" AT TIME ZONE 'UTC')::int AS "Month"
    FROM "Purchases" AS p
) AS p0
GROUP BY p0."Year", p0."Month"
ORDER BY p0."Year", p0."Month"
2025-12-03 00:50:25.597 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Name" AS category, COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Events" AS e
    INNER JOIN "Purchases" AS p ON e."EventId" = p."EventId"
    WHERE c."CategoryId" = e."CategoryId"), 0) AS "ticketsSold"
FROM "Categories" AS c
2025-12-03 00:50:25.598 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT e."Title" AS title, COALESCE((
    SELECT COALESCE(sum(p0."Quantity"), 0)::int
    FROM "Purchases" AS p0
    WHERE e."EventId" = p0."EventId"), 0) AS sold
FROM "Events" AS e
ORDER BY COALESCE((
    SELECT COALESCE(sum(p."Quantity"), 0)::int
    FROM "Purchases" AS p
    WHERE e."EventId" = p."EventId"), 0) DESC
LIMIT @__p_0
2025-12-03 00:50:25.600 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 5.3226ms.
2025-12-03 00:50:25.602 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 6.1487ms.
2025-12-03 00:50:25.605 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.JsonResult in 7.2207ms.
2025-12-03 00:50:25.607 -05:00 [INF] Executing JsonResult, writing value of type 'System.Linq.Enumerable+ListSelectIterator`2[[<>f__AnonymousType11`3[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType12`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Double, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:50:25.608 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType14`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:50:25.610 -05:00 [INF] Executing JsonResult, writing value of type 'System.Collections.Generic.List`1[[<>f__AnonymousType13`2[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], COMP2139-Assignment1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-03 00:50:25.612 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1) in 22.6985ms
2025-12-03 00:50:25.614 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1) in 22.6153ms
2025-12-03 00:50:25.619 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetSalesByCategory (COMP2139-Assignment1)'
2025-12-03 00:50:25.617 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetRevenuePerMonth (COMP2139-Assignment1)'
2025-12-03 00:50:25.615 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1) in 22.0079ms
2025-12-03 00:50:25.621 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetSalesByCategory - 200 null application/json; charset=utf-8 50.0642ms
2025-12-03 00:50:25.622 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetRevenuePerMonth - 200 null application/json; charset=utf-8 51.643ms
2025-12-03 00:50:25.624 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.GetTopEvents (COMP2139-Assignment1)'
2025-12-03 00:50:25.637 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event/GetTopEvents - 200 null application/json; charset=utf-8 66.1438ms
2025-12-03 00:50:44.084 -05:00 [INF] Application is shutting down...
2025-12-03 00:53:53.665 -05:00 [INF] User profile is available. Using 'C:\Users\janik\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-03 00:53:54.425 -05:00 [INF] Executed DbCommand (43ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:53:54.490 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:53:54.493 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-12-03 00:53:54.503 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FullName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2025-12-03 00:53:54.658 -05:00 [INF] Now listening on: http://localhost:5064
2025-12-03 00:53:54.660 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-03 00:53:54.661 -05:00 [INF] Hosting environment: Development
2025-12-03 00:53:54.662 -05:00 [INF] Content root path: C:\Users\janik\OneDrive\Desktop\College related\COMP2139 C# L\COMP2139-Assignment1\COMP2139-Assignment1
2025-12-03 00:53:54.752 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/ - null null
2025-12-03 00:53:54.760 -05:00 [WRN] Failed to determine the https port for redirect.
2025-12-03 00:53:54.811 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1)'
2025-12-03 00:53:54.816 -05:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:53:54.822 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:53:54.827 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.2962ms.
2025-12-03 00:53:54.837 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:53:54.855 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:53:54.900 -05:00 [INF] Executed ViewResult - view Index executed in 64.1298ms.
2025-12-03 00:53:54.903 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1) in 84.1548ms
2025-12-03 00:53:54.905 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1)'
2025-12-03 00:53:54.907 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:53:54.910 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/ - 200 null text/html; charset=utf-8 159.5115ms
2025-12-03 00:53:54.950 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:53:54.954 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:53:54.956 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:53:54.958 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.2098ms.
2025-12-03 00:53:54.960 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:53:54.964 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:53:54.966 -05:00 [INF] Executed ViewResult - view Error404 executed in 6.4089ms.
2025-12-03 00:53:54.968 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 11.7365ms
2025-12-03 00:53:54.969 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:53:54.971 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 64.2128ms
2025-12-03 00:53:54.975 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:54:00.447 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Purchase - null null
2025-12-03 00:54:00.463 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1)'
2025-12-03 00:54:00.467 -05:00 [INF] Route matched with {action = "Index", controller = "Purchase", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index() on controller COMP2139_Assignment1.Controllers.PurchaseController (COMP2139-Assignment1).
2025-12-03 00:54:00.470 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:54:00.557 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."PurchaseId", p."EventId", p."GuestContactInfo", p."PurchaseDate", p."Quantity", p."TotalCost", e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title"
FROM "Purchases" AS p
INNER JOIN "Events" AS e ON p."EventId" = e."EventId"
2025-12-03 00:54:00.599 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 127.9383ms.
2025-12-03 00:54:00.604 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:54:00.616 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:54:00.618 -05:00 [INF] Executed ViewResult - view Index executed in 14.3732ms.
2025-12-03 00:54:00.621 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1) in 151.6934ms
2025-12-03 00:54:00.624 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.PurchaseController.Index (COMP2139-Assignment1)'
2025-12-03 00:54:00.629 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:54:00.635 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Purchase - 200 null text/html; charset=utf-8 188.0304ms
2025-12-03 00:54:00.638 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:54:00.643 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:54:00.646 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:54:00.647 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0186ms.
2025-12-03 00:54:00.650 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:54:00.651 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:54:00.653 -05:00 [INF] Executed ViewResult - view Error404 executed in 3.431ms.
2025-12-03 00:54:00.655 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 9.3852ms
2025-12-03 00:54:00.657 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:54:00.658 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 28.4752ms
2025-12-03 00:54:00.662 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:54:03.672 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Category - null null
2025-12-03 00:54:03.681 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.CategoryController.Index (COMP2139-Assignment1)'
2025-12-03 00:54:03.690 -05:00 [INF] Route matched with {action = "Index", controller = "Category", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String) on controller COMP2139_Assignment1.Controllers.CategoryController (COMP2139-Assignment1).
2025-12-03 00:54:03.698 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.CategoryController.Index (COMP2139-Assignment1) - Validation state: "Invalid"
2025-12-03 00:54:03.713 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CategoryId", c."Description", c."Name"
FROM "Categories" AS c
2025-12-03 00:54:03.720 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.CategoryController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 20.4035ms.
2025-12-03 00:54:03.723 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:54:03.737 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:54:03.741 -05:00 [INF] Executed ViewResult - view Index executed in 19.4844ms.
2025-12-03 00:54:03.744 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.CategoryController.Index (COMP2139-Assignment1) in 51.7207ms
2025-12-03 00:54:03.746 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.CategoryController.Index (COMP2139-Assignment1)'
2025-12-03 00:54:03.749 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Category - 200 null text/html; charset=utf-8 76.6402ms
2025-12-03 00:54:03.754 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:54:03.764 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:54:03.766 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:54:03.769 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:54:03.771 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0178ms.
2025-12-03 00:54:03.774 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:54:03.776 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:54:03.778 -05:00 [INF] Executed ViewResult - view Error404 executed in 3.5366ms.
2025-12-03 00:54:03.781 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 11.4718ms
2025-12-03 00:54:03.783 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:54:03.785 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 30.5277ms
2025-12-03 00:54:03.791 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:54:06.200 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/Event - null null
2025-12-03 00:54:06.204 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1)'
2025-12-03 00:54:06.209 -05:00 [INF] Route matched with {action = "Index", controller = "Event", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32], System.String, System.String, System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller COMP2139_Assignment1.Controllers.EventController (COMP2139-Assignment1).
2025-12-03 00:54:06.212 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1) - Validation state: "Invalid"
2025-12-03 00:54:06.247 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e."EventId", e."AvailableTickets", e."CategoryId", e."Date", e."TicketPrice", e."Title", c."CategoryId", c."Description", c."Name"
FROM "Events" AS e
INNER JOIN "Categories" AS c ON e."CategoryId" = c."CategoryId"
ORDER BY e."Title"
2025-12-03 00:54:06.251 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 37.3788ms.
2025-12-03 00:54:06.254 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:54:06.278 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CategoryId", c."Description", c."Name"
FROM "Categories" AS c
2025-12-03 00:54:06.306 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:54:06.309 -05:00 [INF] Executed ViewResult - view Index executed in 55.8632ms.
2025-12-03 00:54:06.311 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1) in 100.396ms
2025-12-03 00:54:06.314 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.EventController.Index (COMP2139-Assignment1)'
2025-12-03 00:54:06.315 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/Event - 200 null text/html; charset=utf-8 115.0605ms
2025-12-03 00:54:06.321 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/js/events.js - null null
2025-12-03 00:54:06.321 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:54:06.328 -05:00 [INF] The file /js/events.js was not modified
2025-12-03 00:54:06.330 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:54:06.331 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/js/events.js - 304 null text/javascript 9.2782ms
2025-12-03 00:54:06.332 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:54:06.339 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:54:06.341 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0131ms.
2025-12-03 00:54:06.344 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:54:06.345 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:54:06.347 -05:00 [INF] Executed ViewResult - view Error404 executed in 3.4308ms.
2025-12-03 00:54:06.350 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 10.6446ms
2025-12-03 00:54:06.352 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:54:06.354 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 32.5943ms
2025-12-03 00:54:06.360 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 00:55:31.168 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/ - null null
2025-12-03 00:55:31.173 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1)'
2025-12-03 00:55:31.175 -05:00 [INF] Route matched with {action = "Index", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:55:31.178 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:55:31.179 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0152ms.
2025-12-03 00:55:31.181 -05:00 [INF] Executing ViewResult, running view Index.
2025-12-03 00:55:31.183 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:55:31.184 -05:00 [INF] Executed ViewResult - view Index executed in 3.4013ms.
2025-12-03 00:55:31.186 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1) in 9.0628ms
2025-12-03 00:55:31.188 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Index (COMP2139-Assignment1)'
2025-12-03 00:55:31.190 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/ - 200 null text/html; charset=utf-8 22.0685ms
2025-12-03 00:55:31.200 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - null null
2025-12-03 00:55:31.205 -05:00 [INF] Executing endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:55:31.207 -05:00 [INF] Route matched with {action = "Error404", controller = "Home", page = "", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Error404() on controller COMP2139_Assignment1.Controllers.HomeController (COMP2139-Assignment1).
2025-12-03 00:55:31.209 -05:00 [INF] Executing action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) - Validation state: "Valid"
2025-12-03 00:55:31.210 -05:00 [INF] Executed action method COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1), returned result Microsoft.AspNetCore.Mvc.ViewResult in 0.0126ms.
2025-12-03 00:55:31.212 -05:00 [INF] Executing ViewResult, running view Error404.
2025-12-03 00:55:31.214 -05:00 [INF] Accessing expired session, Key:6c5ce6b6-b03e-6ad3-0d10-bc7b6b9f8d5c
2025-12-03 00:55:31.215 -05:00 [INF] Executed ViewResult - view Error404 executed in 2.9725ms.
2025-12-03 00:55:31.217 -05:00 [INF] Executed action COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1) in 8.302ms
2025-12-03 00:55:31.219 -05:00 [INF] Executed endpoint 'COMP2139_Assignment1.Controllers.HomeController.Error404 (COMP2139-Assignment1)'
2025-12-03 00:55:31.220 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5064/COMP2139_Assignment1.styles.css - 404 null text/html; charset=utf-8 20.7454ms
2025-12-03 00:55:31.224 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5064/COMP2139_Assignment1.styles.css, Response status code: 404
2025-12-03 01:05:29.629 -05:00 [INF] Application is shutting down...
